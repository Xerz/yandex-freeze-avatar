# Yandex Freeze Avatar

## Описание

Yandex Freeze Avatar — это сервис для автоматического мониторинга и обновления аватара пользователя на платформе Яндекс. Сервис проверяет изменения аватара через API Яндекса и, при необходимости, обновляет его на указанный файл. Уведомления о статусе работы отправляются через Telegram.

## Основные возможности

- Мониторинг текущего аватара пользователя через API Яндекса.
- Автоматическое обновление аватара на указанный файл.
- Уведомления через Telegram о статусе работы и ошибках.
- Логирование событий в файл `app.log`.

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-repo/yandex-freeze-avatar.git
   cd yandex-freeze-avatar
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Создайте файл `.env`, используя `.env.example` в качестве шаблона:
   ```bash
   cp .env.example .env
   ```

4. Заполните переменные в `.env`:
   - `YANDEX_API_TOKEN` — токен для доступа к API Яндекса.
   - `UTMN_LOGIN` и `UTMN_PASSWORD` — учетные данные для входа.
   - `AVATAR_FILENAME` — имя файла аватара.
   - `TELEGRAM_API_TOKEN` и `TELEGRAM_CHAT_ID` — данные для отправки уведомлений через Telegram.

## Использование

### Локальный запуск

1. Запустите сервис:
   ```bash
   python main.py
   ```

2. Логи работы сохраняются в файл `app.log`.

### Запуск через Docker

1. Соберите Docker-образ:
   ```bash
   docker build -t yandex-freeze-avatar .
   ```

2. Запустите контейнер:
   ```bash
   docker-compose up -d
   ```

### Ввод кода для авторизации

Если для авторизации потребуется код, сервис будет ожидать файл `code.txt` с этим кодом в корневой директории проекта. У вас будет 60 секунд, чтобы создать файл `code.txt` и записать в него код (он должен быть создан сразу с кодом). После этого сервис автоматически продолжит работу.

Пример содержимого файла `code.txt`:
```
123456
```

## Структура проекта

- `main.py` — основной файл, запускающий сервис.
- `telegram_utils.py` — утилита для отправки сообщений в Telegram.
- `update_avatar_utils.py` — утилита для авторизации и обновления аватара.
- `utils.py` — вспомогательные функции для работы с API Яндекса.
- `Dockerfile` и `docker-compose.yml` — файлы для контейнеризации.

## Лицензия

Проект распространяется под лицензией MIT. Подробнее см. [LICENSE](LICENSE).

